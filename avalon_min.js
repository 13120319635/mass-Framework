(function(){function K(){return"avalon"+Math.random().toString(36).substring(2,15)}function L(){if(D){for(var a=0,b;b=D[a++];)b();D=null}try{document.readyState="complete"}catch(c){}}function E(a,b,c){a="for(var "+a+"i=0,n = this.length;i < n;i++){"+b.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+c;return Function("fn,scope",a)}function M(){}function N(a,b){if(a===b)return!0;var c=g.type(a),d=g.type(b),e;if(c!==d)return!1;if("Date"===c)return a.getTime()===b.getTime();if("Object"!==
c&&"Array"!==c)return!1;for(e in a)if(!N(a[e],b[e]))return!1;return!0}function F(a){var b=a.$skipArray,c={},d={},e=[],f=[],h=[],b=Array.isArray(b)?b:[];g.Array.ensure(b,"$skipArray","$watch","$unwatch","$fire","$events");forEach(a,function(a,k){if("function"===typeof k)h.push(a);else{if(-1!==b.indexOf(a)||"$"===a.charAt(0)&&-1!==b.indexOf(a))return h.push(a);var l,m,q;"object"===typeof k&&"function"===typeof k.get&&2>=Object.keys(k).length?(l=function(b){if(arguments.length)H||("function"===typeof k.set&&
k.set.call(d,b),N(q,b)||(q=b,x(l),d.$events&&d.$fire(a,b,m)));else return O&&Z(l),m=k.get.call(d)},f.push(function(){u[r]=this;this();delete u[r]}.bind(l))):(e.push(a),l=function(b){if(arguments.length){if(!H&&!N(m,b)){if(Array.isArray(b))if(m&&m.isCollection){var c=m;c.clear();c.push.apply(c,b)}else m=$(b);else if("Object"===g.type(b))if(m&&m.$id){var c=m,e;for(e in b)b.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&"$id"!==e)&&(c[e]=b[e])}else m=F(b);else m=b;x(l);d.$events&&d.$fire(a,b,m)}}else return Z(l),
m});l[A]=[];c[a]={set:l,get:l,enumerable:!0}}});I?I(d,c):d=ja(c,h);h.forEach(function(b){d[b]=a[b]});e.forEach(function(b){d[b]=a[b]});f.forEach(function(a){a()});d.$watch&&(d.$events={},d.$watch=P.$watch.bind(d),d.$unwatch=P.$unwatch.bind(d),d.$fire=P.$fire.bind(d));d.$id=K();return d}function Z(a){u[r]&&(a=a[A])&&g.Array.ensure(a,u[r])}function x(a){var b=a[A];if(b&&b.length)for(var c=[].slice.call(arguments,1),d=b.concat(),e,f=0,h;h=d[f++];)(e=h.element)&&!e.noRemove&&(0===e.sourceIndex||null===
e.parentNode)?(g.log("remove "+e),g.Array.remove(b,h)):h.apply(0,c)}function Q(a,b,c,d){c=c||[];var e={},f=a.getAttribute(v+"skip"),h=a.getAttribute(v+"important"),s=a.getAttribute(v+"controller");if("string"!==typeof f){if(h)if(g.models[h])b=g.models[h],c=[],a.removeAttribute(v+"important");else return;else if(s){if((f=g.models[s])&&f!==b)c=[b].concat(c),b=f;a.removeAttribute(v+"controller")}for(var f=b,h=c,s=[],k=0,l;l=a.attributes[k++];)if(l.specified){var m=!1,q=!1;if(-1!==l.name.indexOf(v)){var p=
l.name.replace(v,"");if(0<p.indexOf("-"))var z=p.split("-"),p=z.shift();q=!0;m="function"===typeof n[p]}else n[l.name]&&R(l.value)&&(p=l.name,m=!0);m&&s.push({type:p,args:z,element:a,remove:q,node:l,value:l.nodeValue})}S(s,f,h,e);if(!e.stopBinding&&(!1===a.canHaveChildren||!aa[a.tagName])){e=[];for(f=a.firstChild;f;f=f.nextSibling)1===f.nodeType?Q(f,b,c,d):3===f.nodeType&&e.push(f);for(a=0;f=e[a++];)p=b,z=c,f=ba(f,d),f.length&&S(f,p,z)}}}function ca(a){var b=[];if(R(a)){do a=a.replace(ka,function(a,
d){d&&b.push({value:d,expr:!1});return""}),a=a.replace(la,function(a,d){if(d){var e=[];0<d.indexOf("|")&&(d=d.replace(/\|\s*(\w+)\s*(\([^)]+\))?/g,function(a,b,d){e.push(b+(d||""));return""}));b.push({value:d,expr:!0,filters:e.length?e:void 0})}return""});while(R(a));a&&b.push({value:a,expr:!1})}return b}function S(a,b,c,d){a.forEach(function(a){n[a.type](g.mix({},a),b,c,d);a.remove&&a.element.removeAttribute(a.node.name)})}function ba(a,b){var c=[],d=ca(a.nodeValue);if(d.length){for(var e=b.createDocumentFragment();d.length;){var f=
d.shift(),h=b.createTextNode(f.value);f.expr&&c.push({type:"text",node:h,element:a.parentNode,value:f.value,filters:f.filters});e.appendChild(h)}a.parentNode.replaceChild(e,a)}return c}function ma(a,b,c,d,e,f){var h=!1;if(h=window.dispatchEvent?a instanceof ReferenceError:a instanceof TypeError){a=window.opera?a.message.split("Undefined variable: ")[1]:a.message.replace("Can't find variable: ","").replace("\u201c","").replace("'","");a=(a.match(/^[\w$]+/)||[""])[0];for(var h=0,g;g=c[h++];)if(g.hasOwnProperty(a)){var k=
g.$id+f;-1===d.indexOf(k)&&(d.push(k),e.push(g));c=RegExp("(^|[^\\w\\u00c0-\\uFFFF_])("+a.replace(na,"\\$1")+")($|[^\\w\\u00c0-\\uFFFF_])","g");return b.replace(c,function(a,b,d,c){return b+k+"."+d+c})}}}function T(a,b,c){var d=[],e=[],f=new Date-0,h;if(oa){var s=f+1,k=s+1,l=[],m=[],q=!0;a=a.replace(pa,function(a){l.push(a);return s}).replace(qa,function(a){m.push(a);return k});do try{var p=Function.apply(Function,d.concat("return "+a));h=p.apply(p,e);q=!1}catch(z){a=ma(z,a,b,d,e,f),q="string"===
typeof a}while(q);if(a)l.length&&(a=a.replace(RegExp(s,"g"),function(){return l.shift()})),m.length&&(a=a.replace(RegExp(k,"g"),function(){return m.shift()})),a="var ret"+f+" = "+a;else return c.compileFn=function(){return""},""}else{b.forEach(function(a){var b=a.$id+""+f;-1===d.indexOf(b)&&(d.push(b),e.push(a))});a="var ret"+f+" = "+a+"\r\n";for(b=0;q=d[b++];)a="with("+q+"){\r\n"+a+"\r\n}\r\n"}if(c.filters){q=[];q.push(a,"\r\n");b=0;for(var t;t=c.filters[b++];){var n=t.indexOf("(");-1!==n?(a=t.slice(n+
1,t.lastIndexOf(")")).trim(),a=","+a,t=t.slice(0,n).trim()):a="";q.push(" if(filters",f,".",t,"){\r\n\ttry{ret",f," = filters",f,".",t,"(ret",f,a,")}catch(e){};\r\n}\r\n")}a=q.join("");d.push("filters"+f);e.push(g.filters);delete c.filters}c.compileArgs=e;try{p=Function.apply(Function,d.concat(a+("\r\nreturn ret"+f))),h=p.apply(p,e),c.compileFn=p}catch(r){c.compileFn=function(){return""},h=""}q=d=null;return h}function R(a){var b=a.indexOf("{{");return-1!==b&&b<a.indexOf("}}")}function w(a,b,c,d,
e,f){var h,g=d.filters,k=[b].concat(c),l=a.trim();if(!g)for(b=0;c=k[b++];)if(c.hasOwnProperty(l)){h=c;break}b=h?function(){e(h[l])}:function(){var b=d.compileFn,b="function"===typeof b?b.apply(b,d.compileArgs||[]):f?f.map(function(a){return a.expr?T(a.value,k,d):a.value}).join(""):T(a,k,d);e(b)};b.toString=function(){return"eval("+a+")"};b.element=d.element;u[r]=b;O=!0;b();O=!1;delete u[r]}function da(a){var b=a.target=a.srcElement;a.which=null!=a.charCode?a.charCode:a.keyCode;a.timeStamp=new Date-
0;/mouse|click/.test(a.type)&&(b=b.ownerDocument||document,b="BackCompat"===b.compatMode?b.body:b.documentElement,a.pageX=a.clientX+(b.scrollLeft>>0)-(b.clientLeft>>0),a.pageY=a.clientY+(b.scrollTop>>0)-(b.clientTop>>0));a.preventDefault=function(){a.returnValue=!1};a.stopPropagation=function(){a.cancelBubble=!0};return a}function ea(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}function fa(a,b,c){var d=a.options,e=a.selectedIndex;b=(a="select-one"===a.type||0>e)?null:[];for(var f=
a?e+1:d.length,h=0>e?f:a?e:0;h<f;h++)if(c=d[h],(c.selected||h===e)&&!c.disabled){c=ea(c);if(a)return c;b.push(c)}return b}function U(a,b){b=[].concat(b);for(var c=0,d;d=a.options[c++];)d.selected=!!~b.indexOf(ea(d));b.length||(a.selectedIndex=-1)}function V(a,b,c){for(a=a.firstChild;a;a=a.nextSibling)if(8===a.nodeType&&a.nodeValue===b+c)return a}function J(a,b){for(var c=0,d=a.firstChild;d;d=d.nextSibling)8===d.nodeType&&0===d.nodeValue.indexOf(b)&&(d.nodeValue!==b+c&&(d.nodeValue=b+c,d.$scope[d.$indexName]=
c),c++)}function ra(a,b,c,d){d=d[0]||"$data";var e={};e.$index=a;e[d]={get:function(){return b}};e.$first={get:function(){return 0===this.$index}};e.$last={get:function(){return this.$index===c.size()-1}};e.$remove=function(){c.remove(b);return b};return F(e)}function G(a,b,c){var d=c.scopeList,e=c.collection,f=c.element,h=f.ownerDocument,g=[];b=ra(a,b,e,c.args);for(var k=c.view.firstChild;k;k=k.nextSibling){var l=k.cloneNode(!0);e.insertBefore?f.insertBefore(l,e.insertBefore):f.appendChild(l);1===
l.nodeType?Q(l,b,d,h):3===l.nodeType?g.push(l):8===l.nodeType&&(l.nodeValue=k.nodeValue+""+a,l.$indexName=c.args[1]||"$index",l.$scope=b,l.$view=h.createDocumentFragment())}for(a=0;k=g[a++];)c=b,e=d,k=ba(k,h),k.length&&S(k,c,e)}function W(a,b){for(var c=[a],d=a.$view,e=a.nextSibling;e&&!(8===e.nodeType&&0===e.nodeValue.indexOf(b));e=e.nextSibling)c.push(e);for(var f=0;a=c[f++];)d.appendChild(a);return[d,e]}function sa(a,b,c){var d=[];do if(a=W(a,b),a[1])d.push(a[0]),a=a[1];else break;while(d.length!==
c);return d}function ga(a){return Array.isArray(a)?a.$name?a:$(a):"Object"===g.type(a)?a.$id?a:F(a):a}function $(a){var b=a.map(ga);b.$name=K();b[A]=[];var c=F({length:a.length});"push,pop,shift,unshift,splice".replace(y,function(a){var e=Array.prototype[a];b[a]=function(){var b=this.length,h=[].slice.call(arguments);/push|unshift|splice/.test(a)&&(h=h.map(ga));var g=e.apply(this,h);x(this,a,h,b);c.length=this.length;return g}});"sort,reverse".replace(y,function(a){var c=Array.prototype[a];b[a]=function(){var a=
"object"===typeof this[0],b=a?this.map(function(a){return a.$id}).join(""):this.join(""),d=c.apply(this,arguments),a=a?this.map(function(a){return a.$id}).join(""):this.join("");b!==a&&x(this,"update",[]);return d}});b.isCollection=!0;b.clear=function(){this.length=0;x(this,"clear",[]);c.length=0;return this};b.sortBy=function(a,b){var c=g.Array.sortBy(this,a,b);x(this,"sort",[]);return c};b.contains=function(a){return-1!==this.indexOf(a)};b.ensure=function(a){this.contains(a)||this.push(a);return this};
b.update=function(){x(this,"update",[]);return this};b.size=function(){return c.length};b.remove=function(a){a=this.indexOf(a);0<=a&&this.removeAt(a)};b.removeAt=function(a){0<=a&&0===a%1&&this.splice(a,1)};b.removeAll=function(a){if(Array.isArray(a))a.forEach(function(a){b.remove(a)});else if("function"===typeof a)for(var c=this.length-1;0<=c;c--)a(this[c],c)&&this.splice(c,1);else this.clear()};return b}var ta=Object.prototype.toString,u={},r=new Date-0,A="$"+r,ha={},y=/[^, ]+/g,v="ms-",H=!1,O=
!1,X="propertyIsEnumerable isPrototypeOf hasOwnProperty toLocaleString toString valueOf constructor".split(" "),ia=Object.prototype.hasOwnProperty,D=[],g=window.avalon={mix:function(a,b){for(var c in b)a[c]=b[c];return a},subscribers:A,models:{},error:function(a,b){throw new (b||Error)(a);},log:function(a){window.console&&console.log(a)},ready:function(a){D?(D.push(a),"complete"==document.readyState&&L()):a()},bind:window.dispatchEvent?function(a,b,c,d){a.addEventListener(b,c,!!d);return c}:function(a,
b,c){a.attachEvent&&a.attachEvent("on"+b,c);return c},addClass:function(a,b){a.className=(a.className.trim()+" "+b).trim()},addClasses:function(a,b){b.replace(/\w+/g,function(b){g.addClass(a,b)})},removeClass:function(a,b){a.className&&(a.className=(" "+a.className+" ").replace(/[\n\t]/g," ").replace(" "+b.trim()+" "," ").trim())},removeClasses:function(a,b){b.replace(/\w+/g,function(b){g.removeClass(a,b)})},type:function(a){return null===a?"Null":void 0===a?"Undefined":ta.call(a).slice(8,-1)},range:function(a,
b,c){c||(c=1);null==b&&(b=a||0,a=0);var d=-1;b=Math.max(0,Math.ceil((b-a)/c));for(var e=Array(b);++d<b;)e[d]=a,a+=c;return e},forEach:function(a,b){if(a){var c=0;if(Array.isArray(a)||"Object"===g.type(a)&&!a.document&&!a.setTimeout&&isFinite(a.length)&&a[0])for(var d=a.length;c<d;c++)b(c,a[c]);else for(c in a)a.hasOwnProperty(c)&&b(c,a[c])}}};g.bind(window,"load",L);g.bind(window,"DOMContentLoaded",L);"\u53f8\u5f92\u6b63\u7f8e".trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,
"").replace(/[\s\xA0]+$/,"")});for(var va in{toString:1})X=!1;Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)ia.call(a,c)&&b.push(c);if(X&&a)for(var d=0;c=X[d++];)ia.call(a,c)&&b.push(c);return b});Array.isArray||(Array.isArray=function(a){return"Array"===g.type(a)});Function.prototype.bind||(Function.prototype.bind=function(a){if(2>arguments.length&&void 0===a)return this;var b=this,c=arguments;return function(){var d=[],e;for(e=1;e<c.length;e++)d.push(c[e]);for(e=0;e<arguments.length;e++)d.push(arguments[e]);
return b.apply(a,d)}});g.mix(Array.prototype,{indexOf:function(a,b){var c=this.length,d=~~b;for(0>d&&(d+=c);d<c;d++)if(this[d]===a)return d;return-1},lastIndexOf:function(a,b){var c=this.length,d=null==b?c-1:b;for(0>d&&(d=Math.max(0,c+d));0<=d;d--)if(this[d]===a)return d;return-1},forEach:E("","_",""),filter:E("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:E("r=[],","r[i]=_","return r"),some:E("","if(_)return true","return false"),every:E("","if(!_)return false","return true")});g.Array={sortBy:function(a,
b,c){a=a.map(function(a,e){return{el:a,re:b.call(c,a,e)}}).sort(function(a,b){var c=a.re,h=b.re;return c<h?-1:c>h?1:0});return g.Array.pluck(a,"el")},pluck:function(a,b){return a.filter(function(a){return null!=a[b]})},ensure:function(a){[].slice.call(arguments,1).forEach(function(b){~a.indexOf(b)||a.push(b)});return a},removeAt:function(a,b){return!!a.splice(b,1).length},remove:function(a,b){var c=a.indexOf(b);return~c?g.Array.removeAt(a,c):!1}};forEach=g.forEach;var B;"function"===typeof setImmediate?
B=setImmediate.bind(window):function(){function a(){--e;if(++h>=d){h=0;d*=4;for(var a=f&&Math.min(f-1,d);e<a;)++e,g()}for(;f;)--f,b=b.next,a=b.task,b.task=void 0,a();h=0}var b={task:void 0,next:null},c=b,d=2,e=0,f=0,h=0,g=void 0;B=function(a){c=c.next={task:a,next:null};e<++f&&e<d&&(++e,g())};if("undefined"!==typeof MessageChannel){var k=new MessageChannel;k.port1.onmessage=a;g=function(){k.port2.postMessage(0)}}else g=function(){setTimeout(a,0)}}();g.nextTick=B;g.define=function(a,b,c){var d=[].slice.call(arguments);
"string"!==typeof a&&(a=!g.models.root?"root":K(),d.unshift(a));Array.isArray(d[1])||d.splice(1,0,[]);b=d[1];"function"!==typeof d[2]&&g.error("factory\u5fc5\u987b\u662f\u51fd\u6570");c=d[2];d={$events:{},$watch:M,$unwatch:M,$fire:M};b.unshift(d);c(d);d=F(d);H=!0;b[0]=d;c.apply(0,b);b.shift();H=!1;d.$id=a;return g.models[a]=d};var P={$watch:function(a,b){var c=this.$events[a];c?c.push(b):this.$events[a]=[b];return this},$unwatch:function(a,b){var c=arguments.length;if(0===c)this.$events={};else if(1===
c)this.$events[a]=[];else for(var c=this.$events[a]||[],d=c.length;-1<--d;)if(c[d]===b)return c.splice(d,1);return this},$fire:function(a){for(var b=this.$events[a]||[],c=this.$events.$all||[],d=[].slice.call(arguments,1),e=0,f;f=b[e++];)f.apply(this,d);for(e=0;f=c[e++];)f.apply(this,d)}},Y=Object.defineProperty;try{Y({},"_",{value:"x"});var I=Object.defineProperties}catch(wa){"__defineGetter__"in g&&(Y=function(a,b,c){"value"in c&&(a[b]=c.value);"get"in c&&a.__defineGetter__(b,c.get);"set"in c&&
a.__defineSetter__(b,c.set);return a},I=function(a,b){for(var c in b)b.hasOwnProperty(c)&&Y(a,c,b[c]);return a})}if(!I&&window.VBArray){window.execScript("Function parseVB(code)\n\tExecuteGlobal(code)\nEnd Function","VBScript");var ua=function(a,b,c){var d=a[b]&&a[b].set;if(3===arguments.length)d(c);else return d()},ja=function(a,b){b=b.concat();g.Array.ensure(b,"hasOwnProperty");g.Array.ensure(b,"$id");var c="VBClass"+setTimeout("1"),d={},e=[];e.push("Class "+c,"\tPrivate [__data__], [__proxy__]",
"\tPublic Default Function [__const__](d, p)","\t\tSet [__data__] = d: set [__proxy__] = p","\t\tSet [__const__] = Me","\tEnd Function");b.forEach(function(a){d[a]=!0;e.push("\tPublic ["+a+"]")});Object.keys(a).forEach(function(a){d[a]=!0;e.push("\tPublic Property Let ["+a+"](val)",'\t\tCall [__proxy__]([__data__], "'+a+'", val)',"\tEnd Property","\tPublic Property Set ["+a+"](val)",'\t\tCall [__proxy__]([__data__], "'+a+'", val)',"\tEnd Property","\tPublic Property Get ["+a+"]","\tOn Error Resume Next",
"\t\tSet["+a+'] = [__proxy__]([__data__],"'+a+'")',"\tIf Err.Number <> 0 Then","\t\t["+a+'] = [__proxy__]([__data__],"'+a+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")});e.push("End Class");e.push("Function "+c+"Factory(a, b)","\tDim o","\tSet o = (New "+c+")(a, b)","\tSet "+c+"Factory = o","End Function");window.parseVB(e.join("\r\n"));c=window[c+"Factory"](a,ua);c.hasOwnProperty=function(a){return!0===d[a]};return c}}g.scan=function(a,b){a=a||document.documentElement;var c=g.models;if(!b){for(var d in c)if(c.hasOwnProperty(d)){b=
c[d];break}b||g.error("\u81f3\u5c11\u5b9a\u4e49\u4e00\u4e2aViewModel")}Q(a,b,[],a.ownerDocument||document)};var aa={};"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,wbr,script,style".replace(y,function(a){aa[a.toLowerCase()]=1});var na=/([-.*+?^${}()|[\]\/\\])/g,oa=function(){return!this}(),qa=/"([^\\"\n]|\\.)*"/g,pa=/'([^\\'\n]|\\.)*'/g,ka=/([^{]*)\{\{/,la=/([^}]*)\}\}/;"contentEditable,isMap,longDesc,noHref,noResize,noShade,readOnly,useMap".replace(y,function(a){ha[a.toLowerCase()]=
a});g.fixEvent=da;var n=g.bindingHandlers={skip:function(a,b,c,d){d.stopBinding=!0},"if":function(a,b,c){var d=a.element,e=d.ownerDocument.createComment("placehoder"),f=d.parentNode;w(a.value,b,c,a,function(a){B(function(){if(a){if(!d.parentNode||11===d.parentNode.nodeType)f.replaceChild(d,e),d.noRemove=void 0}else 1===d.parentNode.nodeType&&(f.replaceChild(e,d),d.noRemove=!0)})})},on:function(a,b,c){var d=a.element;w(a.value,b,c,a,function(e){var f=a.args&&a.args[0];f&&"function"===typeof e&&(d.$scope=
b,d.$scopes=c,g.bind(d,f,function(a){a=a&&a.target?a:da(event);e.call(d,a)}))})},text:function(a,b,c){var d=a.node;w(a.value,b,c,a,function(a){d.nodeValue=a})},visible:function(a,b,c){var d=a.element;w(a.value,b,c,a,function(a){d.style.display=a?"block":"none"})},href:function(a,b,c){var d=a.value.trim(),e=0===a.node.name.indexOf(v),f=a.type;!e&&/^\{\{([^}]+)\}\}$/.test(d)&&(e=!0,d=RegExp.$1);w(d,b,c,a,function(b){a.element[f]=b},e?null:ca(a.value))},disabled:function(a,b,c){var d=a.element,e=a.type,
f=ha[e]||e;w(a.value,b,c,a,function(a){d[f]=!!a})},"class":function(a,b,c){var d=a.element;w(a.value,b,c,a,function(e){if(a.args){var f=a.args.join(" ");"function"===typeof e&&(d.$scope=b,d.$scopes=c,e=e.call(d));e?g.addClasses(d,f):g.removeClasses(d,f)}else"string"===typeof e?g.addClasses(d,e):e&&"object"===typeof e&&forEach(e,function(a,b){b?g.addClass(d,a):g.removeClass(d,a)})})},ui:function(a,b,c){var d=a.args&&a.args[0],e;b=[b].concat(c);c=0;for(var f;f=b[c++];)if(f.hasOwnProperty(d)){e=f[d];
break}d=a.value.trim();if("function"===typeof g.ui[d])g.ui[d](a.element,e)},options:function(a,b,c){var d=a.element;for("SELECT"!==d.tagName&&g.error("options\u7ed1\u5b9a\u53ea\u80fd\u7ed1\u5728SELECT\u5143\u7d20");0<d.length;)d.remove(0);var e=a.args&&a.args[0];w(a.value,b,c,a,function(c){Array.isArray(c)?B(function(){d.setAttribute(v+"each-option",a.value);var h=new Option("{{option}}","");h.setAttribute("ms-value","option");d.options[0]=h;g.scan(d);if(isFinite(e)&&(h=d.options[e]))h.selected=!0;
if(e&&Array.isArray(b[e])){var s=b[e];U(d,s);g.bind(d,"change",function(){s=fa(d);c.clear();c.push.apply(c,s)})}}):g.error("options\u7ed1\u5b9a\u5fc5\u987b\u5bf9\u5e94\u4e00\u4e2a\u5b57\u7b26\u4e32\u6570\u7ec4")})}},C=n.model=function(a,b,c){var d=a.element,e=d.tagName;if("function"===typeof C[e]){b=[b].concat(c);var f=a.node.value,h;b.forEach(function(a){!h&&a.hasOwnProperty(f)&&(h=a)});h=h||{};C[e](d,h,f)}};C.INPUT=function(a,b,c){void 0===a.name&&(a.name=c);var d=a.type,e=function(){b[c]=a.value},
f=function(){var d=b[c];d!==a.value&&(a.value=void 0===d?"":d)};/^(password|textarea|text)$/.test(d)?(d=a.attributes[v+"event"]||{},d=d.value,"change"===d?g.bind(a,d,e):(window.addEventListener?a.addEventListener("input",e,!1):a.attachEvent("onpropertychange",e),window.VBArray&&window.addEventListener&&(a.attachEvent("onkeydown",function(a){a=a.keyCode;(8===a||46===a)&&e()}),a.attachEvent("oncut",e)))):"radio"===d?(f=function(){a.checked=b[c]===a.value},e=function(){var d=!a.beforeChecked;b[c]=d;
a.beforeChecked=a.checked=d},d=function(){a.beforeChecked=a.checked},null===a.onbeforeactivate?g.bind(a,"beforeactivate",d):g.bind(a,"mouseover",d),g.bind(a,"click",e)):"checkbox"===d&&(e=function(){a.checked?g.Array.ensure(b[c],a.value):g.Array.remove(b[c],a.value)},f=function(){var d=[].concat(b[c]);a.checked=0<=d.indexOf(a.value)},g.bind(a,"click",e));u[r]=f;f.element=a;f();delete u[r]};C.SELECT=function(a,b,c){function d(){U(a,b[c])}var e=a;g.bind(a,"change",function(){b[c]=fa(e);U(a,b[c])});
u[r]=d;d.element=a;d();delete u[r]};C.TEXTAREA=C.INPUT;"autofocus,autoplay,async,checked,controls,declare,defer,contenteditable,ismap,loop,multiple,noshade,open,noresize,readonly,selected".replace(y,function(a){n[a]=n.disabled});n.enabled=function(a,b,c){var d=a.element;w(a.value,b,c,a,function(a){d.disabled=!a})};n.html=function(a,b,c){var d=a.element;w(a.value,b,c,a,function(a){d.innerHTML=null==a?"":a+""})};"title, alt, src, value".replace(y,function(a){n[a]=n.href});"dblclick,mouseout,click,mouseover,mousemove,mousedown,mouseup,keypress,keydown,keyup,blur,focus,change".replace(y,
function(a){n[a]=function(b){b.args=[a];n.on.apply(0,arguments)}});n.each=function(a,b,c,d){function e(b,c,d){var e=h.$name;switch(b){case "push":forEach(h.slice(d),function(b,c){G(d+b,c,a)});break;case "unshift":h.insertBefore=f.firstChild;forEach(h.slice(0,h.length-d),function(b,c){G(b,c,a)});J(f,e);delete h.insertBefore;break;case "pop":var g=V(f,e,d-1);g&&W(g,e);break;case "shift":W(f.firstChild,e);J(f,e);break;case "splice":b=c[0];g=c[1];c=[].slice.call(c,2);var p=0<=g?g:d-b;if(p&&(g=V(f,e,b)))sa(g,
e,p),J(f,e);c.length&&(g=V(f,e,b),h.insertBefore=g,forEach(c,function(b,c){G(b,c,a)}),J(f,e),delete h.insertBefore);break;case "clear":for(;f.firstChild;)f.removeChild(f.firstChild);break;case "update":for(;f.firstChild;)f.removeChild(f.firstChild);forEach(h,function(b,c){G(b,c,a)})}}var f=a.element;b=[b].concat(c);var h=T(a.value,b,a);d=f.ownerDocument;c=d.createDocumentFragment();d=d.createComment(h.$name);for(c.appendChild(d);f.firstChild;)c.appendChild(f.firstChild);a.view=c;a.collection=h;a.scopeList=
b;B(function(){forEach(h,function(b,c){G(b,c,a)})});(h||{}).isCollection&&h[A].push(e)};g.filters={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},truncate:function(a,b,c){b=b||30;c=void 0===c?"...":c;return a.length>b?a.slice(0,b-c.length)+c:String(a)},camelize:function(a){return 0>a.indexOf("-")&&0>a.indexOf("_")?a:a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})},escape:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},currency:function(a,b){return(b||"\uffe5")+g.filters.number(a)},number:function(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");a=!isFinite(+a)?0:+a;b=!isFinite(+b)?0:Math.abs(b);d=d||",";c=c||".";var e="",e=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c},e=(b?e(a,b):""+Math.round(a)).split(".");3<e[0].length&&(e[0]=e[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d));if((e[1]||"").length<b)e[1]=e[1]||"",e[1]+=Array(b-e[1].length+1).join("0");
return e.join(c)}};g.filters.date=function(a){function b(a,b,c){var d="";0>a&&(d="-",a=-a);for(a=""+a;a.length<b;)a="0"+a;c&&(a=a.substr(a.length-b));return d+a}function c(a,c,d,e){return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return b(f,c,e)}}function d(a,b){return function(c,d){var e=c["get"+a](),f=(b?"SHORT"+a:a).toUpperCase();return d[f][e]}}function e(a){var b;if(b=a.match(k)){a=new Date(0);var c=0,d=0,e=b[8]?a.setUTCFullYear:a.setFullYear,f=b[8]?a.setUTCHours:a.setHours;
b[9]&&(c=parseInt(b[9]+b[10],10),d=parseInt(b[9]+b[11],10));e.call(a,parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10));f.call(a,parseInt(b[4]||0,10)-c,parseInt(b[5]||0,10)-d,parseInt(b[6]||0,10),parseInt(b[7]||0,10))}return a}var f={yyyy:c("FullYear",4),yy:c("FullYear",2,0,!0),y:c("FullYear",1),MMMM:d("Month"),MMM:d("Month",!0),MM:c("Month",2,1),M:c("Month",1,1),dd:c("Date",2),d:c("Date",1),HH:c("Hours",2),H:c("Hours",1),hh:c("Hours",2,-12),h:c("Hours",1,-12),mm:c("Minutes",2),m:c("Minutes",
1),ss:c("Seconds",2),s:c("Seconds",1),sss:c("Milliseconds",3),EEEE:d("Day"),EEE:d("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(b(Math[0<a?"floor":"ceil"](a/60),2)+b(Math.abs(a%60),2))}},h=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,n=/^\d+$/,k=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(b,c){var d=
"",k=[],r,t;c=c||"mediumDate";c=a[c]||c;"string"===typeof b&&(b=n.test(b)?parseInt(b,10):e(b));"Number"===g.type(b)&&(b=new Date(b));if("Date"===g.type(b)){for(;c;)(t=h.exec(c))?(k=k.concat(t.slice(1)),c=k.pop()):(k.push(c),c=null);k.forEach(function(c){r=f[c];d+=r?r(b,a):c.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return d}}}({AMPMS:{"0":"\u4e0a\u5348",1:"\u4e0b\u5348"},DAY:{"0":"\u661f\u671f\u65e5",1:"\u661f\u671f\u4e00",2:"\u661f\u671f\u4e8c",3:"\u661f\u671f\u4e09",4:"\u661f\u671f\u56db",5:"\u661f\u671f\u4e94",
6:"\u661f\u671f\u516d"},MONTH:{"0":"1\u6708",1:"2\u6708",2:"3\u6708",3:"4\u6708",4:"5\u6708",5:"6\u6708",6:"7\u6708",7:"8\u6708",8:"9\u6708",9:"10\u6708",10:"11\u6708",11:"12\u6708"},SHORTDAY:{"0":"\u5468\u65e5",1:"\u5468\u4e00",2:"\u5468\u4e8c",3:"\u5468\u4e09",4:"\u5468\u56db",5:"\u5468\u4e94",6:"\u5468\u516d"},SHORTMONTH:{"0":"1\u6708",1:"2\u6708",2:"3\u6708",3:"4\u6708",4:"5\u6708",5:"6\u6708",6:"7\u6708",7:"8\u6708",8:"9\u6708",9:"10\u6708",10:"11\u6708",11:"12\u6708"},fullDate:"y\u5e74M\u6708d\u65e5EEEE",
longDate:"y\u5e74M\u6708d\u65e5",medium:"yyyy-M-d ah:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"ah:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"})})();
