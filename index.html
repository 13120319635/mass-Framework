<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="avalon.js" type="text/javascript"></script>
        <script>
            var model = avalon.define("simple", function(vm) {
                vm.firstName = "司徒"
                vm.lastName = "正美"
                vm.fullName = {//一个包含set或get的对象会被当成PropertyDescriptor，
                    set: function(val) {//里面必须用this指向scope，不能使用scope
                        var array = (val || "").split(" ");
                        this.firstName = array[0] || "";
                        this.lastName = array[1] || "";
                    },
                    get: function() {
                        return this.firstName + " " + this.lastName;
                    }
                }
                vm.fruits = [{name: "xxx"}, {name: "yyy"}, {name: "ooo"}, {name: "ppp"}];
                vm.push = function() {
                    vm.fruits.push({name: "ccccccccc"});
                };
                vm.pop = function() {
                    vm.fruits.pop();
                };
                vm.reverse = function() {
                    vm.fruits.reverse();
                };
                vm.replace = function() {
                    vm.fruits = [{name: 1}, {name: 2}];
                };
                vm.reverseNumbers = function() {
                    vm.numbers.reverse();
                };
                vm.numbers = ["1", "2", "3", "4"]

                vm.nick = {
                    name: "暗黑之民"
                }
                vm.radio = true;
                vm.selectModel = ["bbb"];
                vm.checkboxModel = ["aaa", "bbb"]
      
                vm.background = ["red"]
                vm.sbackground = "red"
                vm.$watch("firstName", function(v, v2) {
                    window.JSON && console.log(JSON.stringify(vm.$json))
                });
                vm.$watch("background.changed", function(v) {
                   vm.sbackground = vm.background + "";//将数组转换为字符串
                });

            });
            // model.checkboxModel.size
//            setTimeout(function(){
//                model.selectModel = ["333"]
//                console.log(model.selectModel)
//            },1000)

        </script>
    </head>
    <body ms-controller="simple">
        <p>First name: <input ms-model="firstName" /></p>
        <p>Last name: <input ms-model="lastName"  /></p>

        <p>Hello, <input ms-model="fullName"></p>
        <div>{{firstName +" | "+ lastName  }}</div>
        <p>nick name: <input ms-model="nick.name"  /></p>
        <p>{{nick.name}}</p>
        <div ms-each-el="fruits" >
            <h3>{{el.name}}</h3>
            <p>这是第{{$index}}个了</p>
            <hr/>
        </div>
        <button ms-click="push">push</button>
        <button ms-click="reverse">reverse</button>
        <button ms-click="pop">pop</button>
        <button ms-click="replace">replace</button>

        <ol ms-each-number="numbers" >
            <li>{{number}}</li>
        </ol>
        <button ms-click="reverseNumbers">reverseNumbers</button>
        <input type="radio" ms-model="radio">{{radio}}
        <select ms-model="selectModel">
            <option value="aaa" selected>aaa</option>
            <option value="bbb">bbb</option>
            <option value="ccc">ccc</option>
        </select>
        <input ms-model="checkboxModel" type="checkbox" value="aaa" />
        <input ms-model="checkboxModel" type="checkbox" value="bbb" />
        <input ms-model="checkboxModel" type="checkbox" value="ccc" />
        <div style="width:200px; height:50px" ms-css-background="sbackground">

        </div>
        <select ms-model="background">
            <option value="red">红</option>
            <option value="yellow">黄</option>
            <option value="green">绿</option>
        </select>
    </body>
</html>
