<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>todos</title>
        <style>

        </style>
        <script src="avalon.js" type="text/javascript"></script>


        <script type="text/javascript">
            avalon.ready(function() {

                var model = avalon.define(function(vm) {
                    vm.firstName = "司徒"
                    vm.lastName = "正美"
                    vm.fullName = {//一个包含set或get的对象会被当成PropertyDescriptor，
                        set: function(val) {//里面必须用this指向scope，不能使用scope
                            var array = (val || "").split(" ");
                            this.firstName = array[0] || "";
                            this.lastName = array[1] || "";
                        },
                        get: function() {
                            return this.firstName + " " + this.lastName;
                        }
                    }
                    console.log(vm)
                    vm.$watch("firstName", function(a,b,c){
                        console.log(a)
                    })
                });
                window.console && console.log(model)
                avalon.scan()
                setTimeout(function() {
                    model.firstName = "vvvvvvvvvvvvvvvvvvv"
                }, 2000)
            })






        </script>
    </head>
    <body>
        <p>First name: <input ms-model="firstName" /></p>
        <p>Last name: <input ms-model="lastName"  /></p>
        <p>Hello, <input ms-model="fullName"></p>
        <div>{{firstName +" | "+ lastName }}</div>


    </body>
</html>