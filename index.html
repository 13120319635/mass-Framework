
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="mass.js"></script>

        <style>
            #ccc {
                border:1px solid red;
            }
        </style>
        <script>

            require("flow", function($) {
                var flow = new $.Flow;
                flow.refresh("aaa,bbb,ccc", function() {
                    $.log(Array.apply([], arguments))
                });
                flow.fire("aaa", 1)//没反应
                flow.fire("bbb", 2)//没反应
                flow.fire("ccc", 3)//[1,2,3]
                flow.fire("aaa", 4)//[4,2,3],刷新第一个
                flow.fire("bbb", 5)//[4,5,3],刷新第二个
                flow.fire("ccc", 6)//[4,5,6],刷新第三个
            })
            require("flow", function($) {
                var flow = new $.Flow;
                flow.reload("aaa,bbb,ccc", function() {
                    $.log(Array.call([], arguments))
                });
                flow.fire("aaa", 1)//没反应
                flow.fire("bbb", 2)//没反应
                flow.fire("ccc", 3)//[1,2,3]
                flow.fire("aaa", 4)//没反应
                flow.fire("bbb", 5)//没反应
                flow.fire("ccc", 6)//[4,5,6]
            })


        </script> 

    </head>
    <body>
        <p id="aaa">mass messager 组件 by 司徒正美</p>

        <a href="#button" id="button">Button</a>
        <script type="text/vbscript">


        </script>
        function onRead(obj, prop) {
        return obj[prop] + "!!";
        }
        function onWrite(obj, prop, val) {
        obj[prop] = val
        }
        var obj = {
        aa: 1,
        bb: 2,
        cc: function() {
        return 3
        }
        };
        var a = fn(obj, onRead, onWrite);
        console.log(a)
        a.aa = 4
        console.log(a.aa)// -> 1!!
        console.log(a.bb)// -> 2!!
        console.log(a.cc())// -> 3
    </body>
</html>