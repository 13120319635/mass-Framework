<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="mass.js">  </script>
        <script type="text/javascript">
            $.config.level = 6
            require("avalon,ready", function($) {
                var VM = $.MVVM.toViewModel({
                    detailsEnabled: false,
                    people: [
                        { firstName: 'Bert', lastName: 'Bertington' },
                        { firstName: 'Charles', lastName: 'Charlesforth' },
                        { firstName: 'Denise', lastName: 'Dentiste' }
                    ],
                    firstName: "清风", //firstName与lastName是这两个属性不可分割，因此使用原子监控者
                    lastName: "火羽",
                    fullName: $.MVVM.compute(function(a){
                        if(arguments.length){
                            var arr = a.split(" ")
                            this.firstName(arr[0])
                            this.lastName(arr[1]);
                        }else{
                            return this.firstName() + " " + this.lastName()
                        }
                    }, ["firstName","lastName"])
                });
            
                VM.enableDetails = function() {
                    VM.detailsEnabled(true);
                }
                VM.disableDetails = function() {
                    VM.detailsEnabled(false);
                }
                $.MVVM.render(VM)
            })

        </script> 


    </head>
    <body>
        <p>
            firstName: <input data-value="firstName"/>
        </p>
        <p>
            lastName: <input data-value="lastName"/>
        </p>
        <p>
            fullName: <input data-value="fullName" />
        </p>


        <div data-class="classes | log">
            测试class绑定,可以同时操作多个类名,classes为一个对象
        </div>
        <table>
            <thead>
                <tr><th>First name</th><th>Last name</th></tr>
            </thead>
            <tbody data-each-p="people">
                <tr>
                    <td data-text="p.firstName"></td>
                    <td data-text="p.lastName"></td>
                </tr>
            </tbody>
        </table>
        <div>
            <div data-on-mouseover="enableDetails" data-on-mouseout="disableDetails" >
                移上去查看详细消息
            </div>
            <div data-display="detailsEnabled">
                这里放置内容
            </div>
        </div>
    </body>
</html>
