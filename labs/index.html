<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>mass Framework</title>
        <script type="text/javascript" src="../src/mass.js" charset="UTF-8"></script>
        <style>
            .mass_main_menu , .mass_sub_menu{
                width:130px;
                -moz-box-shadow:0 0 10px #06c;
                -webkit-box-shadow:0 0 10px #06c;
                box-shadow:0 0 10px #06c;

            }
            .mass_menu_item{
                width:120px;
                padding-left:10px;
                height:24px;
                line-height:24px;
                border-bottom:1px solid #fff;
                background:#0088aa;
                color:#fff;
            }
            .xxx {
                height:20px;
            }
        </style>
        <script>
            $.require("ready,node,event,attr,fx",function(){
                var data = [
                    {   html:"菜单1",
                        sub:[
                            {html:"菜单1-1"},
                            {html:"菜单1-2",
                                sub:[
                                    {html:"菜单3-1"},
                                    {html:"菜单3-2"}
                                ]
                            }
                        ]
                    },
                    {html:"菜单2",
                        sub:[
                            {html:"菜单2-1"},
                            {html:"菜单2-2"}
                        ]},
                    {html:"菜单3"},
                    {html:"菜单4"}
                ]
                var addItem = function( parent, obj ){
                    var item = $("<div class='mass_menu_item'/>")
                    for(var i in obj){
                        if(typeof item[ i ] === "function"){
                            item[ i ]( obj[ i ] );
                        }
                    }
                    return item.appendTo( parent );
                }
                var addMenu = function( parent, cls ){
                    return $("<div />").appendTo( parent  ).addClass(cls)
                }
                var addItems = function( parent, els ){
                    for(var i = 0, el; el = els[i++];){
                        var item = addItem(parent, el );
                        if(el.sub && el.sub.length){
                            item.css( "position","relative");
                            console.log(item.position().top)
                            //  console.log((parseFloat(item.css("border-top-width")) + parseFloat(item.css("padding-top"))) * -1)
                            var sub_menu = addMenu(item).css({
                                position:"absolute",
                                //   display:"none",
                                top:  0,
                                left: item.outerWidth()
                            }).addClass("mass_sub_menu xxx")
                            addItems( sub_menu , el.sub );
                        }

                    }
                }

                var target =  addMenu("body","mass_main_menu")
                addItems(target , data );
















            })
        </script>

    </head>
    <body>
        <h1>XXXXXXXXXXXXXXX</h1>

    </body>
</html>

