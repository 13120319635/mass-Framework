<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>mass Framework</title>


        <script type="text/javascript" src="../src/mass.js" charset="UTF-8"></script>
        <script type="text/javascript" src="ko.js" charset="UTF-8"></script>

        <script>

        </script>

    </head>
    <body>

        <h4>People</h4>
        <ul data-bind="foreach: people">
            <li>
                Name at position <span data-bind="text: $index"> </span>:
                <span data-bind="text: name"> </span>
                <a href="#" class="remove">Remove</a>
            </li>
        </ul>
        <button>Add</button>

        <script type="text/javascript">
            $.require("ready,more/avalon", function(){
                function AppViewModel() {
                    var self = this;

                    self.people = ko.observableArray([
                        { name: 'Bert' },
                        { name: 'Charles' },
                        { name: 'Denise' }
                    ]);

                    self.addPerson = function() {
                        self.people.push({ name: "New at " + new Date() });
                    };

                    self.removePerson = function() {
                        self.people.remove(this);
                    }
                }
                var model = new AppViewModel()
                ko.applyBindings(model);
              
                $(".remove").live("click", function() {
                    console.log(ko.dataFor(this))
                    console.log(ko.contextFor(this))
                    ko.contextFor(this).$parent.removePerson()
                 //   model.people.remove(ko.dataFor(this));
                });
        

            });
        </script>

    </body>
</html>
