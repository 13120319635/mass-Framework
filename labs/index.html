<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>mass Framework</title>


        <script type="text/javascript" src="../src/mass.js" charset="UTF-8"></script>
        <script type="text/javascript" src="ko.js" charset="UTF-8"></script>

        <script>

        </script>

    </head>
    <body>

        <h4>People</h4>
        <ul data-bind="foreach: people">
            <li>
                Name at position <span data-bind="text: $index"> </span>:
                <span data-bind="text: name"> </span>
                <a href="#" class="remove">Remove</a>
            </li>
        </ul>
        <button>Add</button>

        <script type="text/javascript">
            $.require("ready,more/avalon", function(){
                function AppViewModel() {
                    var self = this;

                    self.people = $.observableArray([
                        { name: 'Bert' },
                        { name: 'Charles' },
                        { name: 'Denise' }
                    ]);

                    self.addPerson = function() {
                        self.people.push({ name: "New at " + new Date() });
                    };

                    self.removePerson = function(el) {
                        var model = $.dataFor(el);
                        console.log(model)
                        self.people.remove(model);
                    }
                }
                var model = new AppViewModel(this)
                $.applyBindings(model);
              
                $(".remove").live("click", function() {
                    model.removePerson(this)
                });
        
                $("button").live("click", function() {
                    model.addPerson();
                });
            });
        </script>

    </body>
</html>
