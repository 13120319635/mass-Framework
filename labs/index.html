<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>mass Framework</title>


        <script type="text/javascript" src="../src/mass.js" charset="UTF-8"></script>
        <script type="text/javascript" src="ko.js" charset="UTF-8"></script>

        <script>

            $.require("ready,more/avalon", function(){
                function MyViewModel() {
                    this.firstName = $.observable('Bob');
                    this.lastName = $.observable('Smith');
                    this.fullName = $.computed({
                        getter: function () {
                            return this.firstName() + " " + this.lastName();
                        },
                        setter: function (value) {
                            var lastSpacePos = value.lastIndexOf(" ");
                            if (lastSpacePos > 0) { // Ignore values with no space character
                                this.firstName(value.substring(0, lastSpacePos));
                                // Update "firstName"
                                this.lastName(value.substring(lastSpacePos + 1));
                                // Update "lastName"
                            }
                        },
                        scope: this
                    })
                }
                var viewModel = new MyViewModel
                $.applyBindings(viewModel);

                setTimeout(function(){
                    viewModel.firstName("first"); // change
                },1000);
                setTimeout(function(){
                    viewModel.lastName("last"); // change
                },3000)
                setTimeout(function(){
                    viewModel.fullName("XX YY"); // change
                },5000)
            });
        </script>

        <style>
            #node.red{
                color:red;
            }
            #node {
                color:blue
            }
        </style>


    </head>
    <body>
        The name is <span data-bind="text: fullName"></span>
    </body>
</html>
