

<!DOCTYPE HTML>
<html>
    <head>
        <title>transform by 司徒正美</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script type="text/javascript" src="../src/mass.js">

        </script>
        <style>
            #test{
                background:red;
                width:100px;
                height:100px;

            }
            .transform-box,
.box-parent{
 width:99px;
 height:99px;
 border:solid 1px #000;
 background-color:#AA0;
 -moz-transform-origin: 0 0;
 -webkit-transform-origin: 0 0;
}

.box-parent{
	background-color:#ADA2A5;
	margin:30px;
	width:100px;
	height:100px;
}

#ie-limitations{
	background-color:#ADA2A5;
	padding: 1em;
	color:#fff;
}

p{width:85%;}

.transform-example{margin:15px 15px;}

.section{margin-top:20px;}

.example-holder{
	padding:20px;
}

.example-holder .box-parent{
	margin-top:0px;
	margin-left: 0px;
}

.origin-example{
	position:relative;
	z-index:0;
	margin-bottom: 110px;
	margin-left: 80px;
	overflow:visible;
}

.origin-example .transform-box{
	position:absolute;
	z-index:2;
	overflow:visible;
	-moz-transform: rotate(45deg) skewX(33deg) translate(29px, -18px);
	-webkit-transform: rotate(45deg) skewX(33deg) translate(29px, -18px);
    filter: progid:DXImageTransform.Microsoft.Matrix(M11='0.7071',M12='-0.2479',M21='0.7071',M22='1.1663', sizingMethod='auto expand', FilterType='bilinear');
}

.bounding-box {
	width:97px;
	height: 187px;
	background-color:#09f;
	position:absolute;
	opacity:0.4;
	filter:alpha(opacity=40);
	z-index:1;
}

.step2 div {
	left:-100px !important;
	top: 17px  !important;
}

.step3{
	margin-bottom:40px;
}

.step3 div{
	left:-75px;
	top: -50px;
}

.step4 div{
	left:75.0758px;
	top: -17.8834px;
}

.step5, .proof{
	margin-top: 123px;
	margin-bottom:10px;
}

.step5 div{
	left:26.5px;
	top:-112px;
}

#original-el{
	position:absolute;
}

#true-transform {
	-moz-transform: rotate(45deg) skewX(33deg);
	-moz-transform-origin: 150% 33%;
	-webkit-transform: rotate(45deg) skewX(33deg);
	-webkit-transform-origin: 150% 33%;
}

.proof{
 padding-left: 78px;
}

.ex-1{margin-top:80px;}

        </style>
        <script>
            $.require("ready,css",function(){
      /*  
                var matrix = $("#test").css("transform","skewx( 10deg ) rotate(45deg)").data("matrix",void 0, true)
                matrix.decompose2D();
                $.log("a  : "+matrix.a)
                $.log("b  : "+matrix.b)
                $.log("c  : "+matrix.c)
                $.log("d  : "+matrix.d)
                $.log("tx  : "+matrix.tx)
                $.log("ty  : "+matrix.ty);

         
          translate(150px,20px)    var matrix = new $.Matrix(3,3,1,0,0,0,1,0,0,0,1);
                matrix.rotate.apply(matrix,["90deg"]);
                matrix.decompose2D();
                $.log("a  : "+matrix.a)
                $.log("b  : "+matrix.b)
                $.log("c  : "+matrix.c)
                $.log("d  : "+matrix.d)
                $.log("tx  : "+matrix.tx)
                $.log("ty  : "+matrix.ty);*/
            });
            //http://hi.baidu.com/fmqc/blog/item/07bdeefa75f2e0cbb58f3100.html
            //$.require("ready,node,css",function(a,b,c){
            //顺时针转45度，然后再转45度
              
            //   var d = new D(1.41421, 1.41421, -1.41421, 1.41421, -17.0711, 1.2132);
            //  console.log(d.reset(0,1,5,-0.2,1.4,14))
            //matrix(1.44889, 0.388229, -0.388229, 1.44889, 222.163px, 59.5284px)
            /*  var transform = "skewx( 10deg ) translate(150px,20px)"
                transform.replace(/(\w+)\(([^)]+)\)/g,function(a,b,c){
                    b = map[b] || b
                    console.log(a);
                    console.log(b)
                 console.log(c)
                    var d = c.replace(/px/g,"").match($.rword)
                    console.log(d)
                })*/

            // })
        </script>
    </head>
    <body>
        <div class="box-parent origin-example step1">
			<div class="transform-box" >

			</div>
			<div class="bounding-box"> </div>
			</div>

<!--        <div style="background:green;padding:100px;">
            <div id="test">
                test
            </div>
        </div>-->
        <!--
        var data = $("#test").css("transform"," rotate(90deg)")//rotate(45deg)
        .data("matrix",void 0, true);
        $.log(")))))))))))))))))))))");

        $.log(data.a)
        $.log(data.b)
        $.log(data.c)
        $.log(data.d)
        $.log(data.tx)
        $.log(data.ty);

        var $el = $("#test")
        var matrix = $el.css("transform","rotate(90deg)").data("matrix",void 0, true)
        //打印浏览器使用getComputedStyle得到结果
        $.log($el.css("transform"))
        //打印经过$.Matrix处理过的结果
        $.log( matrix.get2D() );
        //分解原始数值,得到a,b,c,e,tx,ty属性,以及返回一个包含x,y,scaleX,scaleY,skewX,skewY,rotation的对象
        matrix.decompose2D();
        $.log(matrix.a)
        $.log(matrix.b)
        $.log(matrix.c)
        $.log(matrix.d)
        $.log(matrix.tx)
        $.log(matrix.ty);

    translate(-10px,-20px) scale(2) rotate(45deg) translate(5px,10px);
        transform = transform.split(")");
                var  i = -1, l = transform.length -1, split, prop, val;
                while(++i < l){
                    split = transform[i].split("(");
                    prop = split[0].trim();
                    val = split[1];
                    console.log(prop)
                      console.log(val)
                }-->


    </body>
</html>
